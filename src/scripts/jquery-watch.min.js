(function(n,t){n.fn.watch=function(i){function u(t,i,u){t.each(function(){var i=n(this),t;window.MutationObserver?(t=i.data("__watcherObserver"),t==null&&(t=new MutationObserver(u.fnc),i.data("__watcherObserver",t)),t.observe(this,{attributes:!0,subtree:r.watchChildren,childList:r.watchChildren,characterData:!0})):u.intervalId=setInterval(u.fnc,interval)})}function f(i){var e=n(this),r=e.data(i),c,s,f,h,o;if(r&&(c=this,r.func)){for(e.unwatch(i),s=!1,f=0,f;f<r.props.length;f++)if((h=r.props[f],o="",o=h.startsWith("attr_")?e.attr(h.replace("attr_","")):e.css(h),o!=t)&&r.vals[f]!=o){r.vals[f]=o;s=!0;break}console.log("__watcher "+s,r.func);s&&r.func.call(c,r,f);u(e,i,r)}}var r=n.extend({properties:null,interval:100,id:"_watcher",watchChildren:!1,callback:null},i);return this.each(function(){var e=this,i=n(this),o=function(){f.call(e,r.id)},t={id:r.id,props:r.properties.split(","),vals:[r.properties.split(",").length],func:r.callback,fnc:o,origProps:r.properties,interval:r.interval,intervalId:null};n.each(t.props,function(n){t.vals[n]=i.css(t.props[n])});i.data(r.id,t);u(i,r.id,t)})};n.fn.unwatch=function(t){return this.each(function(){var i=n(this),u=i.data(t),r;try{window.MutationObserver?(r=i.data("__watcherObserver"),r&&(r.disconnect(),i.removeData("__watcherObserver"))):clearInterval(u.intervalId)}catch(f){}}),this};String.prototype.startsWith=function(n){return this.length==0?!1:n==this.substr(0,n.length)}})(jQuery,undefined);